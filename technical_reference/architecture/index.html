<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.73">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="H00KD Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="H00KD Blog Atom Feed"><title data-react-helmet="true">Architecture | H00KD</title><meta data-react-helmet="true" property="og:url" content="https://h00kd.com/technical_reference/architecture"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Architecture | H00KD"><meta data-react-helmet="true" name="description" content="Overview"><meta data-react-helmet="true" property="og:description" content="Overview"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon-32x32.png"><link data-react-helmet="true" rel="canonical" href="https://h00kd.com/technical_reference/architecture"><link data-react-helmet="true" rel="alternate" href="https://h00kd.com/technical_reference/architecture" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://h00kd.com/technical_reference/architecture" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7e7e0d4a.css">
<link rel="preload" href="/assets/js/styles.d8497ebf.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.8644394c.js" as="script">
<link rel="preload" href="/assets/js/main.a4b31cf3.js" as="script">
<link rel="preload" href="/assets/js/1.9604c145.js" as="script">
<link rel="preload" href="/assets/js/2.591049c5.js" as="script">
<link rel="preload" href="/assets/js/1a4e3797.2d2f91cb.js" as="script">
<link rel="preload" href="/assets/js/1be78505.4819b197.js" as="script">
<link rel="preload" href="/assets/js/23.9187b2fb.js" as="script">
<link rel="preload" href="/assets/js/22.59e21732.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.74e80c4c.js" as="script">
<link rel="preload" href="/assets/js/17896441.53ba86c2.js" as="script">
<link rel="preload" href="/assets/js/fdb71df9.0ce05503.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="H00KD Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.svg" alt="H00KD Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">H00KD Docs</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Shard-Labs/h00kd-contracts" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="H00KD Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.svg" alt="H00KD Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">H00KD Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/Shard-Labs/h00kd-contracts" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0"><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/how-it-works">How It works</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/h00kd">H00KD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/h00kd_metadata">H00kd Metadata</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Technical Reference</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/technical_reference/architecture">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/technical_reference/ipfs">IPFS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/technical_reference/subgraph">Subgraph</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contracts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contracts/h00kd">H00KD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contracts/h00kd_metadata">H00KD Metadata</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/deployed-contracts">Deployed Contracts</a></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">Architecture</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>H00KD composed of three contracts, one of which is external. The external <a href="#linkdrop">Linkdrop</a> contract is used to create new NEAR accounts and it is being called on very specific situations. The remaining two contracts constitute the main functionalities of H00KD. <a href="#h00kd-metadata">H00KD Metadata</a> contract manages all the events, from creating new events, adding new public keys and closing or canceling events. Lastly, <a href="#h00kd">H00KD</a> contract is a <a href="https://github.com/near/NEPs/blob/master/neps/nep-0171.md" target="_blank" rel="noopener noreferrer">NEP-171</a> contract with an additional complexity layer that optimizes storage and gas costs.</p><p><img alt="alt text" src="/assets/images/h00kd_arch-0e2aa63a37cdd0d191d4e30a8969dfac.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="linkdrop"></a>Linkdrop<a class="hash-link" href="#linkdrop" title="Direct link to heading">#</a></h2><ul><li><a href="https://github.com/near/near-linkdrop" target="_blank" rel="noopener noreferrer">Source code</a></li><li><a href="https://github.com/near/near-linkdrop/blob/master/src/lib.rs#L127" target="_blank" rel="noopener noreferrer">Method</a></li></ul><p>H00KD make use of the Linkdrop contract to create new NEAR accounts. The Linkdrop contract allows any user or contracts to create a new NEAR account by making use of the <code>create_account</code> method.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="h00kd-metadata"></a>H00KD Metadata<a class="hash-link" href="#h00kd-metadata" title="Direct link to heading">#</a></h2><p>The <a href="/contracts/h00kd_metadata">H00KD Metadata</a> contract&#x27;s role is to manage all the events created and enable users create NEAR accounts and claim new NFTs.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="create-new-event-and-adding-public-keys"></a>Create new event and adding public keys<a class="hash-link" href="#create-new-event-and-adding-public-keys" title="Direct link to heading">#</a></h3><p>When creating a new event, the event data is being stored on IPFS <a href="/technical_reference/ipfs">(example)</a>. Once the event data&#x27;s CID is obtained, it will be stored on the contract along side with the <a href="#genesis-token">genesis token</a> metadata and the event start/end date.</p><p><img alt="alt text" src="/assets/images/create_event_add_keys-2779777bd507a73671e1769d55868b7b.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="event-state-transition"></a>Event State Transition<a class="hash-link" href="#event-state-transition" title="Direct link to heading">#</a></h3><p><img alt="alt text" src="/assets/images/event_state_transition-2ac213fb8b487448f3abf7a0030d109f.png"></p><p>All events have three possible states. Each state indicates also what kind of actions can be done for a particular event.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="opened"></a>Opened<a class="hash-link" href="#opened" title="Direct link to heading">#</a></h4><p>Opened event is the initial state of all events. On this state, the owner can add new public keys linked to the event and users can claim or create NEAR accounts.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="closed"></a>Closed<a class="hash-link" href="#closed" title="Direct link to heading">#</a></h4><p>A closed event indicated that the event has ended. An event can move to this state only of the block time is higher than the event end date. After the transition, all remaining allocated funds are sent back to the event owner.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="cancelled"></a>Cancelled<a class="hash-link" href="#cancelled" title="Direct link to heading">#</a></h4><p>A cancelled evend indicated that the event has been cancelled. An event canm move to this state only if the block time is lower thant the event start date. After the transition, all the allocated funds are sent back to the event owner.</p><p><strong>Note: after closing or cancelling an event, all interactions with that event are disabled</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="h00kd"></a>H00KD<a class="hash-link" href="#h00kd" title="Direct link to heading">#</a></h2><p>The <a href="/contracts/h00kd">H00KD</a> contract implements the NEP-171 standard in order to manage and store NFTs. On top of all NEP-171 functionalities, we added an optimization layer that allows us to reduce the storage costs and enable event owners to create NFTs cheaper than ever.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="clone"></a>Clone<a class="hash-link" href="#clone" title="Direct link to heading">#</a></h3><ul><li><a href="https://github.com/shard-Labs/near_non_fungible_token_with_clone/" target="_blank" rel="noopener noreferrer">Source</a></li></ul><p>The contract implements a new functionality to optimize minting new NFTs using a &quot;root&quot; or &quot;genesis&quot; token. This new feature is called &quot;Clonable NFTs&quot; and its main goal is to save storage and improve gas costs on all claim transactions.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="genesis-token"></a>Genesis Token<a class="hash-link" href="#genesis-token" title="Direct link to heading">#</a></h4><p>To completely optimize the storage costs of cloned NFTs and avoid duplicated data, all data related to any NFT is stored within the geneis token, which is minted on event creation. The only data a cloned NFT stores is the token id and the owner account id. Thus, when fetching any NFT from the contract, data from genesis token is used to complement the cloned NFT data.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="impact-of-clonable-nfts-on-storage-and-gas-costs"></a>Impact of clonable NFTs on storage and gas costs<a class="hash-link" href="#impact-of-clonable-nfts-on-storage-and-gas-costs" title="Direct link to heading">#</a></h4><p><img alt="alt text" src="/assets/images/mint_vs_clone-fd57f3d2acb0b9fda3795f3432fe7df4.png"></p><p>After experimenting with both mechanisms, we found that, for a reasonabe NFT data size, cloning NFTs is being more efficient in comparison to minting new NFTs, where the cost storage increases drastically.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ShardLabs/h00kd-docs/blob/main/docs/technical_reference/architecture.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/guides/h00kd_metadata"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« H00kd Metadata</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/technical_reference/ipfs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">IPFS Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#linkdrop" class="table-of-contents__link">Linkdrop</a></li><li><a href="#h00kd-metadata" class="table-of-contents__link">H00KD Metadata</a><ul><li><a href="#create-new-event-and-adding-public-keys" class="table-of-contents__link">Create new event and adding public keys</a></li><li><a href="#event-state-transition" class="table-of-contents__link">Event State Transition</a></li></ul></li><li><a href="#h00kd" class="table-of-contents__link">H00KD</a><ul><li><a href="#clone" class="table-of-contents__link">Clone</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/styles.d8497ebf.js"></script>
<script src="/assets/js/runtime~main.8644394c.js"></script>
<script src="/assets/js/main.a4b31cf3.js"></script>
<script src="/assets/js/1.9604c145.js"></script>
<script src="/assets/js/2.591049c5.js"></script>
<script src="/assets/js/1a4e3797.2d2f91cb.js"></script>
<script src="/assets/js/1be78505.4819b197.js"></script>
<script src="/assets/js/23.9187b2fb.js"></script>
<script src="/assets/js/22.59e21732.js"></script>
<script src="/assets/js/935f2afb.74e80c4c.js"></script>
<script src="/assets/js/17896441.53ba86c2.js"></script>
<script src="/assets/js/fdb71df9.0ce05503.js"></script>
</body>
</html>